on: [push]

jobs:
  test_action:
    runs-on: ubuntu-latest
    name: Test our GitHub action
    steps:
      - name: Checkout
        uses: actions/checkout@v3
      - name: Test patch
        env:
          ARTIFACT_KUBERNETES_CLUSTER: ${{ secrets.ARTIFACT_KUBERNETES_CLUSTER_GCP }}
          APPLICATION_ID: infra-staging-myapp-884422
          IMAGE: the-full-image-path:${{ github.sha }}
        uses: ./ # Uses an action in the root directory
        id: kubernetes-patch-aws
      # - name: Generate the kube config
      #   env:
      #     ARTIFACT_KUBERNETES_CLUSTER: ${{ secrets.ARTIFACT_KUBERNETES_CLUSTER_GCP }}
      #   uses: ./
      #   id: kubernetes-authentication-gcp
      # - name: Test kube config, GCP
      #   env:
      #     KUBECONFIG: ${{ steps.kubernetes-authentication-gcp.outputs.kube_config }}
      #   run: kubectl get pods
